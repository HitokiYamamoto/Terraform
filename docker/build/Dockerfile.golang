FROM golang:1.25.6-trixie@sha256:fb4b74a39c7318d53539ebda43ccd3ecba6e447a78591889c0efc0a7235ea8b3

ENV TASK_VERSION=3.46.4

# https://taskfile.dev/docs/installation#install-script
RUN sh -c "$(curl --location https://taskfile.dev/install.sh)" -- -d -b /usr/local/bin v${TASK_VERSION}

RUN useradd -m -s /bin/bash golang && \
    mkdir -p /home/go && \
    chown -R golang:golang /home/go

WORKDIR /go/src

USER golang

{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  extends: ["config:best-practices", ":disableDependencyDashboard"],
  labels: ["renovate"],
  customManagers: [
    {
      customType: "regex",
      description: "Comment-based updates for YAML and Justfile",
      managerFilePatterns: [
        "(^|/)\\.github/(workflows|actions)/.*\\.ya?ml$",
        "(^|/)action\\.ya?ml$",
        "(^|/)justfile$",
      ],
      matchStrings: [
        "[:=][ \\t]*[\"']?(?<currentValue>[^\"'\\s]+)[\"']?[ \\t]*#[ \\t]*renovate:[ \\t]*datasource=[\"']?(?<datasource>[^\\s\"']+)[\"']?[ \\t]+depName=[\"']?(?<depName>[^\\s\"']+)[\"']?",
      ],
      depNameTemplate: "{{ depName }}",
      datasourceTemplate: "{{ datasource }}",
      autoReplaceStringTemplate: "{{newValue}}{{#if newDigest}}@{{newDigest}}{{/if}}",
    },
    {
      customType: "regex",
      description: "Terraform version in GitHub Actions YAML and Dockerfile",
      managerFilePatterns: [
        "(^|/)\\.github/(workflows|actions)/.*\\.ya?ml$",
        "(^|/)Dockerfile$",
      ],
      matchStrings: [
        "terraform_version:[ \\t]*[\"']?(?<currentValue>[\\d\\.]+)[\"']?",
        "ENV[ \\t]+TERRAFORM_VERSION[=\\s][\"']?(?<currentValue>v?[\\d\\.]+)[\"']?",
      ],
      depNameTemplate: "hashicorp/terraform",
      datasourceTemplate: "github-releases",
    },
    {
      customType: "regex",
      description: "Dockerfile ENV: TFLint",
      managerFilePatterns: ["(^|/)Dockerfile$"],
      matchStrings: [
        "ENV[ \\t]+TFLINT_VERSION[=\\s][\"']?(?<currentValue>v?[\\d\\.]+)[\"']?",
      ],
      depNameTemplate: "terraform-linters/tflint",
      datasourceTemplate: "github-releases",
    },
    {
      customType: "regex",
      description: "Dockerfile ENV: Task",
      managerFilePatterns: ["(^|/)Dockerfile\\.golang$"],
      matchStrings: [
        "ENV[ \\t]+TASK_VERSION[=\\s][\"']?(?<currentValue>v?[\\d\\.]+)[\"']?",
      ],
      depNameTemplate: "go-task/task",
      datasourceTemplate: "github-releases",
    },
  ],
  packageRules: [
    {
      groupName: "Terraform Version",
      matchPackageNames: ["/terraform/"],
    },
    {
      groupName: "Go Ecosystem",
      matchPackageNames: ["/^go$/", "/golang/"],
    },
    {
      groupName: "TFLint Version",
      matchPackageNames: ["/tflint/"],
    },
    {
      groupName: "Task Version",
      matchPackageNames: ["/go-task/task/"],
    },
    {
      groupName: "Trivy Version",
      matchPackageNames: ["/trivy/"],
    },
    {
      matchPackageNames: ["/trivy/"],
      matchDatasources: ["docker"],
      pinDigests: true,
    },
    {
      groupName: "uv Version",
      matchPackageNames: ["/ghcr.io/astral-sh/uv/", "/astral-sh/uv/"],
    },
    {
      groupName: "YamlLint Version",
      matchPackageNames: ["/yamllint/"],
    },
    {
      groupName: "Prettier Version",
      matchPackageNames: ["/prettier/"],
    },
    {
      groupName: "Renovate Docker Digest",
      matchDatasources: ["docker"],
      matchDepNames: ["renovate/renovate"],
      pinDigests: true,
      separateMajorMinor: false,
    },
    {
      matchUpdateTypes: ["major", "minor", "patch"],
      commitMessageAction: "update",
      commitMessageTopic: "{{depName}}",
      commitMessageExtra: "to {{newVersion}}",
    },
  ],
}
